version: '0.0.1-alpha-{build}'
image: Visual Studio 2017
configuration:
 - Release
environment:
  DOTNET_CLI_TELEMETRY_OPTOUT: 1
init:
  - ps: $Env:LABEL = $Env:APPVEYOR_BUILD_NUMBER.PadLeft(5, "0")
before_build:
  dotnet restore --verbosity m
build_script:
  - ps: dotnet build -c $Env:CONFIGURATION --version-suffix $Env:LABEL
after_build:
  - ps: dotnet pack -c $Env:CONFIGURATION --version-suffix $Env:LABEL -o artifacts
test_script:
  - ps: dotnet test -c $Env:CONFIGURATION
artifacts:
  - path: artifacts\**\*.nupkg
cache:
- '%USERPROFILE%\.nuget\packages'